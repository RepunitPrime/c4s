<% provide(:title, "Edit Profile") %>
<div class="container">
  <!-- Title -->
  <h1 class="page-header">My Profile</h1>
  <div class="ui buttons">
    <button class="big ui button" onclick="RedirectToProfiles()">
      <i class="arrow circle outline left icon"></i>Back</button>

</div>
  <hr>
<div class="col-sm-12">
  <br/><br/>
  <%= form_for :user, class:"form form-horizontal", url:profile_update_path(current_user),html: { multipart: true }, method: :patch do |f| %>
  <div class="text-center">
    <% if flash[:color]== "invalid"%>
        <div class="alert alert-danger alert-dismissible" role="alert">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span></button>
          <span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span> <%=flash[:notice]%>
        </div>
    <%elsif flash[:color]== "valid" %>
        <div class="alert alert-success alert-dismissible" role="alert">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span></button>
          <span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span> <%=flash[:notice]%>
        </div>
    <%end%>
    <% if current_user.profile_pic_file_name.nil? %>
        <%= image_tag('/default_profile_pic.png', :id =>"Image_Tag", :alt => "No Image", class:'img-circle')%>
    <%else%>
        <%= image_tag(current_user.profile_pic,:id =>"Image_Tag",  :alt => "No Image", class:'img-circle') %>
    <%end%>
<br/>
  </div>
  <div class="col-sm-push-2 col-sm-8">
    <div class="form-group">
      <div class="form-group">
        <%= f.label :Profile_Picture %>
        <br>
        <%= f.file_field 'profile_pic', class:'filestyle form-control',data: {buttonBefore: "true"} %>
      </div>
          <div class="form-group">
            <%= f.label :Full_Name %>
            <br>
            <%= f.text_field :name, class:'form-control', value: current_user.name,maxlength: '30' %>
          </div>
          <div class="form-group">
            <%= f.label :Username %>
            <br>
            <%= f.text_field :username, class:'form-control', value: current_user.username,maxlength: '20' %>
          </div>
          <div class="form-group">
            <%= f.label :Email %>
            <br>
            <%= f.text_field :email, class:'form-control', value: current_user.email,maxlength: '30' %>
          </div>
      <br/>
      <div class="form-group">
        <button type="submit" name="commit"  class="huge ui teal icon button">
          <i class="save icon"></i>Save</button>
      </div>
  <%end%>
    </div>
  </div>
</div>

</div>
<script>

  function RedirectToProfiles() {
    window.location = "<%= profile_index_path %>"
  }
</script>